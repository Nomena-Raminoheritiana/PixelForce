(self.webpackChunk=self.webpackChunk||[]).push([[5785],{6737:(e,t,n)=>{"use strict";n.d(t,{M:()=>c});n(5666),n(2526),n(1817),n(9254),n(1539),n(8674);var o=n(5802),i=n.n(o),r=n(9755);function a(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)}))}}var c=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selector:null,titre:null,description:null,progress:function(){},complete:function(){},error:function(){}},n=r(t.selector).get(0).files;new(i())({name:t.titre,description:t.description,private:!1,file:n[0],token:"a781f06cbd3425359a926002030d3e89",upgrade_to_1080:!1,onError:function(e){t.error(e)},onProgress:function(e){t.progress(Math.floor(e.loaded/e.total*100))},onComplete:(e=s(regeneratorRuntime.mark((function e(n,o){var i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i="/videos/"+n,r=null,o>-1&&(i=this.metadata[o].link,r=JSON.stringify(this.metadata[o],null,2)),t.complete(n,i,r);case 4:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})}).upload()}},8881:(e,t,n)=>{"use strict";n(5666),n(2564),n(9600),n(6699),n(2023),n(8309),n(3710),n(1539),n(8674),n(9826),n(9554),n(4747),n(2222);var o=["video/x-flv","video/mp4","video/avi","application/x-mpegURL","video/MP2T","video/3gpp","video/quicktime","video/x-msvideo","video/x-ms-wmv"],i=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/pdf","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],r=["audio/basic","audio/basic","auido/L24","audio/mid","audio/mid","audio/mpeg","audio/mp4","audio/x-aiff","audio/x-aiff","audio/x-aiff","audio/x-mpegurl","audio/vnd.rn-realaudio","audio/vnd.rn-realaudio","audio/ogg","audio/vorbis","audio/vnd.wav"],a=n(6737),s=n(8294),c=n(9669),u=n.n(c),d=n(9755);function l(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function a(e){l(r,o,i,a,s,"next",e)}function s(e){l(r,o,i,a,s,"throw",e)}a(void 0)}))}}function f(){return m.apply(this,arguments)}function m(){return m=p(regeneratorRuntime.mark((function e(){var t,n,o,i,r,a,c,l,p,f,m=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:"",n=[],o=[],i=new FormData,r=new FormData,a=new FormData(d('form[name="formation"]')[0]),d("#formation-document").find('input[type="file"]').each((function(){i.append("documents[]",this.files[0]);var e={name:this.files[0].name,mimeType:this.files[0].type,type:"document"};n.push(e)})),d("#formation-audio").find('input[type="file"]').each((function(){r.append("audios[]",this.files[0]);var e={name:this.files[0].name,mimeType:this.files[0].type,type:"audio"};o.push(e)})),c=d('<img src="'+s+'" />'),v.replaceWith(c),v=d(c),T.html("<strong>Téléchargement des documents en cours ...</strong>"),e.next=14,u().post(Routing.generate("coach_formation_uploadDocument"),i,{headers:{"Content-Type":"multipart/form-data"}});case 14:return(l=e.sent.data).error||l.files.forEach((function(e,t){n[t].slug=e})),T.html("<strong>Téléchargement des audios en cours ...</strong>"),e.next=19,u().post(Routing.generate("coach_formation_uploadAudio"),r,{headers:{"Content-Type":"multipart/form-data"}});case 19:return(p=e.sent.data).error||p.files.forEach((function(e,t){o[t].slug=e})),T.html("<strong>Finalisation ...</strong>"),f=n.concat(o),a.append("mediasData",JSON.stringify(f)),a.append("video_id",t),e.next=27,u().post(d("#formation, #formation-fiche").attr("action"),a);case 27:e.sent.data;case 28:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}n(3587),d(document).ready((function(){d(this).on("click","#submit-formation",function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),D((function(){var e;C(0),(0,a.M)({selector:d("#inputVideo"),titre:d("#video-upload-name").text(),description:"",error:function(e){alert("erreur lors du téléchargement video "+e)},progress:function(e){C(e)},complete:(e=p(regeneratorRuntime.mark((function e(t,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:v.remove(),T.html('<div class="text-center">   <h1 class="text-success"><i class="fa fa-circle-check"></i></h1>        <strong>Formation ajouté avec succès</strong> </div>'),setTimeout((function(){T.html("<strong>Rafraichissement de la page ...</strong>"),setTimeout((function(){location.href=Routing.generate("coach_formation_list")}),1e3)}),1e3);case 5:case"end":return e.stop()}}),e)}))),function(t,n,o){return e.apply(this,arguments)})})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var e=!1;d(this).on("click","#btn-add-video",(function(t){t.preventDefault();var n=d("<input />",{type:"file",class:"d-none",accept:o.join(","),id:"inputVideo"});d(this).closest("#formation-video").append(n),n.trigger("click"),e=!0})),d(this).on("change","#inputVideo",(function(e){e.preventDefault();var t=d("#video-upload-preview")[0],n=d("#video-upload-name")[0],i=d("#loading-video-container")[0],r=d("#loading-video")[0],a=d("<source />"),s=this.files[0];if(d(n).removeClass("d-none"),o.includes(s.type)){d(n).append(s.name),d(i).removeClass("d-none"),d("#btn-add-video").addClass("d-none");var c=new FileReader;c.onload=function(e){a.attr("src",e.target.result),t.appendChild(a[0]),t.load(),t.play()},c.onprogress=function(e){d(r).html(Math.round(100*e.loaded/e.total))},c.onloadend=function(e){d(i).addClass("d-none"),d(t).removeClass("d-none")},c.readAsDataURL(s)}else d("#btn-add-video").removeClass("d-none"),d(n).html("Le fichier charger n'est pas une video")})),d(this).on("click","#btn-add-document",(function(e){e.preventDefault();var t=d("<input />",{type:"file",class:"d-none input-file-document",accept:i.join(",")});d(this).closest("#formation-document").append(t),t.trigger("click")})),d(this).on("change","#formation-document .input-file-document",(function(e){e.preventDefault();var t=this.files[0];i.includes(t.type)&&d("#document-upload-name").append('<span class="badge bg-light-info text-dark"><i class="fa-solid fa-book me-2"></i> '+t.name+"</span>").append("<br>")})),d(this).on("click","#btn-add-audio",(function(e){e.preventDefault();var t=d("<input />",{type:"file",class:"d-none input-file-audio",accept:r.join(",")});d(this).closest("#formation-audio").append(t),t.trigger("click")})),d(this).on("change","#formation-audio .input-file-audio",(function(e){e.preventDefault();var t=this.files[0];r.includes(t.type)&&d("#audio-upload-name").append('<span class="badge bg-light-info text-dark"><i class="fa-solid fa-music me-2"></i> '+t.name+"</span>").append("<br>")})),d(this).on("click",".btn-media-delete",(function(e){e.preventDefault();var t=d("<input />",{type:"hidden",class:"hidden_media_deleted",name:"deleted_media[]",value:d(this).attr("data-media-id")});d("#formation-fiche").append(t),d(this).closest(".media").first().remove()})),d(this).on("click","#edit-formation",function(){var t=p(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),D(p(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(0),n=new FormData,d(".hidden_media_deleted").each((function(){n.append("deleted_media[]",d(this).val())})),t.next=5,u().post(Routing.generate("coach_formation_deleteMedia"),n);case 5:if(!e){t.next=10;break}d(".hiddenVideoData").remove(),(0,a.M)({selector:d("#inputVideo"),titre:d("#video-upload-name").text(),description:"",error:function(e){alert("erreur lors du téléchargement video "+e)},progress:function(e){C(e)},complete:function(){var e=p(regeneratorRuntime.mark((function e(t,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:v.remove(),T.html('<div class="text-center">   <h1 class="text-success"><i class="fa fa-circle-check"></i></h1>        <strong>Formation modifié avec succès</strong> </div>'),setTimeout((function(){T.html("<strong>Rafraichissement de la page ...</strong>"),setTimeout((function(){location.reload()}),1e3)}),1e3);case 5:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()}),t.next=15;break;case 10:return t.next=12,f();case 12:v.remove(),T.html('<div class="text-center">   <h1 class="text-success"><i class="fa fa-circle-check"></i></h1>        <strong>Formation modifié avec succès</strong> </div>'),setTimeout((function(){T.html("<strong>Rafraichissement de la page ...</strong>"),setTimeout((function(){location.reload()}),1e3)}),1e3);case 15:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));var h,v,g,y,_,w,b,x,R,k,T=null;function C(e){null==h?(h=d("<div />",{class:"w-100 h-100 position-absolute top-0 start-0 d-flex",style:"background: rgba(255,255,255,0.7)"}),g=d("<div />",{class:"m-auto w-100 text-center"}),v=d("<div />",{class:"progress w-50 mx-auto mb-2 shadow-sm"}),y=d("<div />",{class:"progress-bar progress-bar-striped bg-primary",role:"progressbar"}),T=d("<div />",{class:"text-center"}).html("<strong>Téléchargement de la video en cours ...</strong>"),y.html(e),v.html(y),g.html(v),g.append(T),h.html(g),d("#form-formation").append(h)):(y.html(e+"%"),y.css({width:e+"%"}),y.attr("aria-valuenow",e))}function D(e){d("#formation, #formation-fiche").validate({rules:{"formation[titre]":"required","formation[description]":"required","formation[categorieFormation]":"required","formation[contenu]":"required"},messages:{"formation[titre]":"<i class='fa fa-warning'></i> Veuillez entrer une titre","formation[description]":"<i class='fa fa-warning'></i> La description est obligatoire","formation[categorieFormation]":"<i class='fa fa-warning'></i> La catégorie est obligatoire","formation[contenu]":"<i class='fa fa-warning'></i> Veuillez entrer le contenu de la formation"},submitHandler:function(){if(0===d("#inputVideo").length){d("#formation").prepend('<div class="alert alert-danger my-2" role="alert">\n  La vidéo est obligatoire\n</div>')}else e()}}),d("#formation, #formation-fiche").submit()}_=window,w=document,b="script",x="ga",_.GoogleAnalyticsObject=x,_.ga=_.ga||function(){(_.ga.q=_.ga.q||[]).push(arguments)},_.ga.l=1*new Date,R=w.createElement(b),k=w.getElementsByTagName(b)[0],R.async=1,R.src="//www.google-analytics.com/analytics.js",k.parentNode.insertBefore(R,k),ga("create","UA-57984417-1","auto"),ga("send","pageview")},5802:function(e,t,n){var o,i;n(2564),n(8309),n(2526),n(1817),n(4812),n(7042),n(1058),n(4916),n(4723),n(3123),n(9600),n(1249),n(7941),n(1539),n(2165),n(6992),n(8783),n(3948),i=this,void 0===(o=function(){return i.VimeoUpload=function(){var e=function(){this.interval=1e3,this.maxInterval=6e4};e.prototype.retry=function(e){setTimeout(e,this.interval),this.interval=this.nextInterval_()},e.prototype.reset=function(){this.interval=1e3},e.prototype.nextInterval_=function(){var e=2*this.interval+this.getRandomInt_(0,1e3);return Math.min(e,this.maxInterval)},e.prototype.getRandomInt_=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};var t={api_url:"https://api.vimeo.com",name:"Default name",description:"Default description",contentType:"application/offset+octet-stream",api_version:"3.4",token:null,file:{},metadata:[],upgrade_to_1080:!1,offset:0,chunkSize:0,retryHandler:new e,onComplete:function(){},onProgress:function(){},onError:function(){}},n=function(e){for(var n in t)this[n]=void 0!==e[n]?e[n]:t[n];if(this.accept="application/vnd.vimeo.*+json;version="+this.api_version,this.httpMethod=e.fileId?"PUT":"POST",this.videoData={name:e.name>""?e.name:t.name,description:e.description>""?e.description:t.description,privacy:{view:e.private?"nobody":"anybody"}},!(this.url=e.url)){var o=e.params||{};this.url=this.buildUrl_(e.fileId,o,e.baseUrl)}};return n.prototype.defaults=function(e){return t},n.prototype.upload=function(){var e=new XMLHttpRequest;e.open(this.httpMethod,this.url,!0),this.token&&e.setRequestHeader("Authorization","Bearer "+this.token),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Accept",this.accept),e.onload=function(e){if(e.target.status<400){var n=JSON.parse(e.target.responseText);this.url=n.upload.upload_link,this.video_url=n.uri,this.user=n.user,this.ticket_id=n.ticket_id,this.complete_url=t.api_url+n.complete_uri,this.sendFile_()}else this.onUploadError_(e)}.bind(this),e.onerror=this.onUploadError_.bind(this);var n=this.videoData;n.upload={approach:"tus",size:this.file.size},e.send(JSON.stringify(n))},n.prototype.sendFile_=function(){var e=this.file,t=this.file.size;(this.offset||this.chunkSize)&&(this.chunkSize&&(t=Math.min(this.offset+this.chunkSize,this.file.size)),e=e.slice(this.offset,t));var n=new XMLHttpRequest;n.open("PATCH",this.url,!0),n.setRequestHeader("Accept",this.accept),n.setRequestHeader("Tus-Resumable","1.0.0"),n.setRequestHeader("Upload-Offset",this.offset),n.setRequestHeader("Content-Type",this.contentType),n.upload&&n.upload.addEventListener("progress",this.onProgress),n.onload=this.onContentUploadSuccess_.bind(this),n.onerror=this.onContentUploadError_.bind(this),n.send(e)},n.prototype.resume_=function(){var e=new XMLHttpRequest;e.open("HEAD",this.url,!0),e.setRequestHeader("Tus-Resumable","1.0.0"),e.setRequestHeader("Accept",this.accept),e.upload&&e.upload.addEventListener("progress",this.onProgress);var t=function(e){var t=JSON.parse(e.target.responseText);this.offset=t.offset,this.offset>=this.file.size?this.onContentUploadSuccess_(e):this.sendFile_()};e.onload=t.bind(this),e.onerror=this.onContentUploadError_.bind(this),e.send()},n.prototype.extractRange_=function(e){var t=e.getResponseHeader("Range");t&&(this.offset=parseInt(t.match(/\d+/g).pop(),10)+1)},n.prototype.complete_=function(e){var t=this.video_url.split("/").pop();this.onComplete(t)},n.prototype.onContentUploadSuccess_=function(e){e.target.status>=200&&e.target.status<300?this.complete_():308==e.target.status&&(this.extractRange_(e.target),this.retryHandler.reset(),this.sendFile_())},n.prototype.onContentUploadError_=function(e){e.target.status&&e.target.status<500?this.onError(e.target.response):this.retryHandler.retry(this.resume_())},n.prototype.onCompleteError_=function(e){this.onError(e.target.response)},n.prototype.onUploadError_=function(e){this.onError(e.target.response)},n.prototype.buildQuery_=function(e){return e=e||{},Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},n.prototype.buildUrl_=function(e,n,o){var i=o||t.api_url+"/me/videos";e&&(i+=e);var r=this.buildQuery_(n);return r&&(i+="?"+r),i},n}()}.apply(t,[]))||(e.exports=o)},8294:(e,t,n)=>{"use strict";e.exports=n.p+"images/3-Leg-Preloader.78ef2f3b.svg"}},e=>{e.O(0,[9755,2719,2273,1386,8674,5666,7165,8394],(()=>{return t=8881,e(e.s=t);var t}));e.O()}]);