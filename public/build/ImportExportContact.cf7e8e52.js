(self.webpackChunk=self.webpackChunk||[]).push([[4363],{3461:(t,e,r)=>{var n=r(9755);function o(t,e,r,n,o,c,a){try{var i=t[c](a),s=i.value}catch(t){return void r(t)}i.done?e(s):Promise.resolve(s).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,c){var a=t.apply(e,r);function i(t){o(a,n,c,i,s,"next",t)}function s(t){o(a,n,c,i,s,"throw",t)}i(void 0)}))}}r(9554),r(1539),r(4747),r(8674),r(2222),r(5666);var a,i=n("#google_client_id").text(),s=n("#google_api_key").text(),u="https://www.googleapis.com/discovery/v1/apis/people/v1/rest",l=!1,p=!1,f={},d=n("#agentId").text();function h(){return v.apply(this,arguments)}function v(){return(v=c(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gapi.client.init({apiKey:s,discoveryDocs:[u]});case 2:l=!0,m();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){l&&p&&n("#authorize_button").removeClass("d-none")}function b(){return x.apply(this,arguments)}function x(){return(x=c(regeneratorRuntime.mark((function t(){var e,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,gapi.client.people.people.connections.list({resourceName:"people/me",pageSize:100,personFields:"names,phoneNumbers,emailAddresses,addresses",sortOrder:"FIRST_NAME_ASCENDING"});case 3:e=t.sent,t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(0),n("#content").text(t.t0.message),t.abrupt("return");case 10:if((r=e.result.connections)&&0!=r.length){t.next=14;break}return n("#content").text("No connections found."),t.abrupt("return");case 14:for(o=0;o<r.length;o++)r[o].names[0],n("#before_list_checkbox").append('\n            <input type="checkbox" id="contact_'.concat(o,'" name="contact_').concat(o,'" value="').concat(o,'" class="checkClass">\n            <label for="contact_').concat(o,'"> ').concat(r[o].names[0].displayName,"</label><br>\n        "));n("form#contact_form #btn_submit_form").removeClass("d-none"),n("form#contact_form #btn_submit_form").addClass("d-block"),n("#btn_export_mobile_pdf").removeClass("d-none"),n("#btn_export_mobile_pdf").addClass("d-block"),n("#btn_export_mobile_excel").removeClass("d-none"),n("#btn_export_mobile_excel").addClass("d-block"),n("#check-all").removeClass("d-none"),n("#check-all").addClass("d-block"),f=r;case 24:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}n("#signout_button").css("visibility","hidden"),gapi.load("client",h),a=google.accounts.oauth2.initTokenClient({client_id:i,scope:"https://www.googleapis.com/auth/contacts.readonly",callback:""}),p=!0,m(),n("#authorize_button").on("click",(function(){a.callback=function(){var t=c(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e.error){t.next=2;break}throw e;case 2:return n("#signout_button").css("visibility","visible"),n("#authorize_button").text("Rafraichir"),n("form#contact_form").removeClass("d-none"),t.next=7,b();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),null===gapi.client.getToken()?a.requestAccessToken({prompt:"consent"}):a.requestAccessToken({prompt:""})})),n("#btn_export_mobile_excel").on("click",(function(t){var e=n(this);e.attr("disabled",!0);var r=[],o=[];n('form#contact_form input[type="checkbox"]:checked').each((function(){r.push(n(this).val())})),r.forEach((function(t){o.push(f[t])}));var c={contacts:o};n.ajax({url:"/agent/mobile/contacts/exportExcel",type:"POST",data:c,beforeSend:function(){n("#spinner_loader").html('<div class="spinner-border text-secondary" role="status"><span class="visually-hidden">Loading...</span></div>')},success:function(t){n("#spinner_loader").html(""),e.attr("disabled",!1),"empty"===t.contacts&&n("#spinner_loader").html('<span class="text-waring"> Veuillez cocher au moin, un contat </span>'),"successfully"===t.contacts&&function(t){var e="";t.forEach((function(t,r){t.forEach((function(t,r){e+=t+";"})),e+="\r\n"})),e="data:application/csv;charset=utf-8,%EF%BB%BF"+encodeURI(e);var r=document.createElement("A");r.setAttribute("href",e),r.setAttribute("download","contact.csv"),document.body.appendChild(r),r.click()}(t.datas)},error:function(){e.html("Erreur")}})})),n("#btn_export_mobile_pdf").on("click",(function(t){var e=[],r=[];n('form#contact_form input[type="checkbox"]:checked').each((function(){e.push(n(this).val())})),e.forEach((function(t){r.push(f[t])}));var o={contacts:r};n.ajax({url:"/agent/mobile/contacts/exportPdf",type:"POST",data:o,beforeSend:function(){n("#spinner_loader").html('<div class="spinner-border text-secondary" role="status"><span class="visually-hidden">Loading...</span></div>')},success:function(t){n("#spinner_loader").html("")},error:function(){n("#spinner_loader").html("")}})})),n("#contact_form").on("submit",(function(t){t.preventDefault(),n("#btn_submit_form").attr("disabled",!0);var e=[],r=[];n('form#contact_form input[type="checkbox"]:checked').each((function(){e.push(n(this).val())})),e.forEach((function(t){r.push(f[t])}));var o={contacts:r,agentId:d};n.ajax({url:"/agent/contact/mobile/import",type:"POST",data:o,beforeSend:function(){n("#spinner_loader").html('<div class="spinner-border text-secondary" role="status"><span class="visually-hidden">Loading...</span></div>')},success:function(t){n("#spinner_loader").html(""),"added"===t.contact&&(window.location.href="/agent/contact/liste?contactMobile=added")},error:function(){n("#spinner_loader").html("Erreur")}})})),n(":radio#cocher").click((function(){n(":checkbox.checkClass").prop("checked",!0),n(":radio#decocher").prop("checked",!1)})),n(":radio#decocher").click((function(){n(":checkbox.checkClass").prop("checked",!1),n(":radio#cocher").prop("checked",!1)}))},9483:(t,e,r)=>{var n=r(7854),o=r(4411),c=r(6330),a=n.TypeError;t.exports=function(t){if(o(t))return t;throw a(c(t)+" is not a constructor")}},6077:(t,e,r)=>{var n=r(7854),o=r(614),c=n.String,a=n.TypeError;t.exports=function(t){if("object"==typeof t||o(t))return t;throw a("Can't set "+c(t)+" as a prototype")}},8533:(t,e,r)=>{"use strict";var n=r(2092).forEach,o=r(9341)("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},2092:(t,e,r)=>{var n=r(9974),o=r(1702),c=r(8361),a=r(7908),i=r(6244),s=r(5417),u=o([].push),l=function(t){var e=1==t,r=2==t,o=3==t,l=4==t,p=6==t,f=7==t,d=5==t||p;return function(h,v,m,b){for(var x,y,_=a(h),g=c(_),k=n(v,m),S=i(g),w=0,L=b||s,C=e?L(h,S):r||f?L(h,0):void 0;S>w;w++)if((d||w in g)&&(y=k(x=g[w],w,_),t))if(e)C[w]=y;else if(y)switch(t){case 3:return!0;case 5:return x;case 6:return w;case 2:u(C,x)}else switch(t){case 4:return!1;case 7:u(C,x)}return p?-1:o||l?l:C}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},1194:(t,e,r)=>{var n=r(7293),o=r(5112),c=r(7392),a=o("species");t.exports=function(t){return c>=51||!n((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:(t,e,r)=>{"use strict";var n=r(7293);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){return 1},1)}))}},206:(t,e,r)=>{var n=r(1702);t.exports=n([].slice)},7475:(t,e,r)=>{var n=r(7854),o=r(3157),c=r(4411),a=r(111),i=r(5112)("species"),s=n.Array;t.exports=function(t){var e;return o(t)&&(e=t.constructor,(c(e)&&(e===s||o(e.prototype))||a(e)&&null===(e=e[i]))&&(e=void 0)),void 0===e?s:e}},5417:(t,e,r)=>{var n=r(7475);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},6135:(t,e,r)=>{"use strict";var n=r(4948),o=r(3070),c=r(9114);t.exports=function(t,e,r){var a=n(e);a in t?o.f(t,a,c(0,r)):t[a]=r}},8324:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(t,e,r)=>{var n=r(317)("span").classList,o=n&&n.constructor&&n.constructor.prototype;t.exports=o===Object.prototype?void 0:o},2104:(t,e,r)=>{var n=r(4374),o=Function.prototype,c=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(c):function(){return a.apply(c,arguments)})},9974:(t,e,r)=>{var n=r(1702),o=r(9662),c=r(4374),a=n(n.bind);t.exports=function(t,e){return o(t),void 0===e?t:c?a(t,e):function(){return t.apply(e,arguments)}}},490:(t,e,r)=>{var n=r(5005);t.exports=n("document","documentElement")},3157:(t,e,r)=>{var n=r(4326);t.exports=Array.isArray||function(t){return"Array"==n(t)}},4411:(t,e,r)=>{var n=r(1702),o=r(7293),c=r(614),a=r(648),i=r(5005),s=r(2788),u=function(){},l=[],p=i("Reflect","construct"),f=/^\s*(?:class|function)\b/,d=n(f.exec),h=!f.exec(u),v=function(t){if(!c(t))return!1;try{return p(u,l,t),!0}catch(t){return!1}},m=function(t){if(!c(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!d(f,s(t))}catch(t){return!0}};m.sham=!0,t.exports=!p||o((function(){var t;return v(v.call)||!v(Object)||!v((function(){t=!0}))||t}))?m:v},7497:t=>{t.exports={}},7674:(t,e,r)=>{var n=r(1702),o=r(9670),c=r(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return o(r),c(n),e?t(r,n):r.__proto__=n,r}}():void 0)},288:(t,e,r)=>{"use strict";var n=r(1694),o=r(648);t.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},8003:(t,e,r)=>{var n=r(3070).f,o=r(2597),c=r(5112)("toStringTag");t.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!o(t,c)&&n(t,c,{configurable:!0,value:e})}},6707:(t,e,r)=>{var n=r(9670),o=r(9483),c=r(5112)("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||null==(r=n(a)[c])?e:o(r)}},2222:(t,e,r)=>{"use strict";var n=r(2109),o=r(7854),c=r(7293),a=r(3157),i=r(111),s=r(7908),u=r(6244),l=r(6135),p=r(5417),f=r(1194),d=r(5112),h=r(7392),v=d("isConcatSpreadable"),m=9007199254740991,b="Maximum allowed index exceeded",x=o.TypeError,y=h>=51||!c((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),_=f("concat"),g=function(t){if(!i(t))return!1;var e=t[v];return void 0!==e?!!e:a(t)};n({target:"Array",proto:!0,forced:!y||!_},{concat:function(t){var e,r,n,o,c,a=s(this),i=p(a,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(g(c=-1===e?a:arguments[e])){if(f+(o=u(c))>m)throw x(b);for(r=0;r<o;r++,f++)r in c&&l(i,f,c[r])}else{if(f>=m)throw x(b);l(i,f++,c)}return i.length=f,i}})},9554:(t,e,r)=>{"use strict";var n=r(2109),o=r(8533);n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},1539:(t,e,r)=>{var n=r(1694),o=r(1320),c=r(288);n||o(Object.prototype,"toString",c,{unsafe:!0})},4747:(t,e,r)=>{var n=r(7854),o=r(8324),c=r(8509),a=r(8533),i=r(8880),s=function(t){if(t&&t.forEach!==a)try{i(t,"forEach",a)}catch(e){t.forEach=a}};for(var u in o)o[u]&&s(n[u]&&n[u].prototype);s(c)}},t=>{t.O(0,[9755,2719,8674,5666],(()=>{return e=3461,t(t.s=e);var e}));t.O()}]);