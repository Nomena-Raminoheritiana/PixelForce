{% extends 'base.html.twig' %}

{% block body %}
    <div class="px-2 px-md-4">
        <div class="row">
            {% for live in lives %}
                <div class="col-lg-4 col-md-5 col-12 mt-2 mt-md-4">
                    <div class="live w-100 h-100 bg-white border p-3 position-relative" >
                        <div class="row">
                            <div class="col-6">
                                <h1><i class="fa-solid fa-video {{ live.is_in_process ? 'text-success' : 'text-danger' }}"></i></h1>
                            </div>
                            <div class="col-6 d-flex pe-1">
                                <span class="my-auto ms-auto text-success fw-bold ">
                                    {{ (live.userB|split(','))|length }} <i class="fa-solid fa-users"></i>
                                </span>
                            </div>
                        </div>
                        <div class=" mb-4">
                            <small class="my-auto fw-bold text-danger">{{ live.is_in_process ? 'En ligne' : 'Hors ligne' }}</small>
                        </div>
                        <h5> {{ live.theme ? live.theme : 'Cette réunion n\'a pas de theme' }}</h5>
                        <p class="text-start"><small><u>Date début du live</u> : <span class="text-success">{{ live.date_debut_live|date('d-m-Y H:m:s') }}</span></small></p>
                        <p class="mb-5"><u>Description</u> : {{ live.description ? live.description|slice(0, 150) : 'pas de description sur ce live' }}</p>
                        <div class="text-end w-100 position-absolute bottom-0 pe-4 pb-2">
                            {% if live.userA == app.user.id %}
                                <a href="#" class="btn btn-sm btn-secondary text-white" data-bs-toggle="modal" data-bs-target="#ModalEditLive{{ live.id }}"><i class="fa fa-edit"></i> Modifier</a>
                            {% endif %}
                            <a href="{{ path('live_destruct', {code: live.code}) }}" class="btn btn-danger btn-sm">Quitter</a>
                        </div>
                    </div>
                </div>
                <!-- import modal -->
                {% include 'live/video/modal_modification.html.twig' with {live:live, agents: agents} %}

            {% else %}
                <div class="col-12 w-100 h-100 d-flex mt-2 mt-md-4">
                    <div class="m-auto">
                        <img src="{{ asset('build/images/live-illustration.webp') }}" alt="" class="border border-danger border-5 img-fluid" />
                        <h1 class="text-center text-muted mt-3">Aucun live n'est programmé </h1>
                    </div>

                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block title %}
    Liste des videos planifier
{% endblock %}

